### 单调栈算法总结

[toc]

#### 1.单调栈是什么



单调栈顾名思义就是单调的栈分为单调递减栈，单调递增栈，分别对应不同的使用场景，在 Java 中没有现成的数据结构，需要我们自己维护。

单调递减栈的定义方式如下：

~~~java
Stack<Integer> stack = new Stack<>();
// 这里存储的是 目标数组的索引
        stack.push(0);
        for (int i = 1; i < nums.length; i++) {
            if (nums[i] >= nums[stack.peek()]) { // 比栈顶大元素直接压入栈中保持单调递减
                stack.push(i);
            } else {
                while (!stack.isEmpty() && nums[i] < nums[stack.peek()]) {
                    // 其它操作
                     stack.pop();
                }
                stack.push(i);
            }
        }
~~~

单调递增栈的定义方式如下：

~~~java
Stack<Integer> stack = new Stack<>();
// 这里存储的是 目标数组的索引
        stack.push(0);
        for (int i = 1; i < nums.length; i++) {
            if (nums[i] <= nums[stack.peek()]) { // 比栈顶小元素直接压入栈中保持单调递增
                stack.push(i);
            } else {
                while (!stack.isEmpty() && nums[i] > nums[stack.peek()]) {
                    // 其它操作
                     stack.pop();
                }
                stack.push(i);
            }
        }
~~~

#### 2.单调栈适合什么样的场景

单调栈多用于解决寻找某个元素右边第一个比他大或者小的元素，左边也同样适用。在一次遍历中可找到目标元素 `target`左边第一个比它小的和右边第一个比它小的数。单调栈的作用其实也就是保存已经遍历过的元素。

如以下是一个单调递减栈，存储的是数组的下标

~~~java
for (int i = 1; i < nums.length; i++) {
            if (nums[i] >= nums[stack.peek()]) {
                stack.push(i);
            } else {
                while (!stack.isEmpty() && nums[i] < nums[stack.peek()]) {
                    //目标元素在栈的栈顶
                    int mid = stack.pop();
                    //左边第一个小的元素栈顶的下一个元素
                    int left = stack.peek();
                    // 右边第一个小的元素
                    int right = i ;
                    res = Math.max(res, w * nums[mid]);
                }
                stack.push(i);
            }
        }
~~~

几个关键的点，在处理算法问题的时候：

1. 需要遍历哪个数组，用单调栈存储
2. 使用单调递减栈还是单调递增栈
3. 单调栈存储的是元素本身还是索引

#### 3.力扣题目推荐练习

1.[每日温度]([739. 每日温度 - 力扣（LeetCode）](https://leetcode.cn/problems/daily-temperatures/)) 入门题目
2.[下一个更大元素1](https://leetcode.cn/problems/next-greater-element-i/)
3.[下一个更大元素川](https://leetcode.cn/problems/next-greater-element-ii/)
4.[接雨水]([42. 接雨水 - 力扣（LeetCode）](https://leetcode.cn/problems/trapping-rain-water/))手撕算法经典题目
5[.柱状图中最大的矩形]([84. 柱状图中最大的矩形 - 力扣（LeetCode）](https://leetcode.cn/problems/largest-rectangle-in-histogram/))